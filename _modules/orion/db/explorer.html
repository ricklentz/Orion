
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>orion.db.explorer &#8212; Orion 0.2.1.dev0 documentation</title>
    
    <link href="../../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
  
    
    <link rel="stylesheet"
      href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">
  
    
      
  
    
    <link rel="stylesheet" href="../../../_static/styles/pydata-sphinx-theme.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">
  
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="../../../index.html">
<p class="title">Orion</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../getting_started/index.html">
  Getting Started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../user_guides/index.html">
  User Guides
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../api_reference/index.html">
  API Reference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../developer_guides/index.html">
  Developer Guides
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../history.html">
  Release Notes
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/sintel-dev/Orion" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <h1>Source code for orion.db.explorer</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Orion DB Explorer model.</span>

<span class="sd">This model defines the ``orion.db.explorer.OrionDBExplorer``, which provides</span>
<span class="sd">a simple programatic access to creating and reading objects in the Orion Database.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="kn">from</span> <span class="nn">gridfs</span> <span class="kn">import</span> <span class="n">GridFS</span>
<span class="kn">from</span> <span class="nn">mlblocks</span> <span class="kn">import</span> <span class="n">MLPipeline</span>
<span class="kn">from</span> <span class="nn">mongoengine</span> <span class="kn">import</span> <span class="n">connect</span>
<span class="kn">from</span> <span class="nn">mongoengine.errors</span> <span class="kn">import</span> <span class="n">NotUniqueError</span>
<span class="kn">from</span> <span class="nn">pymongo.database</span> <span class="kn">import</span> <span class="n">Database</span>

<span class="kn">from</span> <span class="nn">orion.data</span> <span class="kn">import</span> <span class="n">load_signal</span>
<span class="kn">from</span> <span class="nn">orion.db</span> <span class="kn">import</span> <span class="n">schema</span>

<span class="n">LOGGER</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="OrionDBExplorer"><a class="viewcode-back" href="../../../api_reference/api/orion.db.OrionDBExplorer.html#orion.db.OrionDBExplorer">[docs]</a><span class="k">class</span> <span class="nc">OrionDBExplorer</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;User interface for the Orion Database.</span>

<span class="sd">    This class provides a user-frienly programming interface to</span>
<span class="sd">    interact with the Orion database models.</span>

<span class="sd">    Args:</span>
<span class="sd">        user (str):</span>
<span class="sd">            Unique identifier of the user that creates this OrionExporer</span>
<span class="sd">            instance. This username or user ID will be used to populate</span>
<span class="sd">            the ``created_by`` field of all the objects created in the</span>
<span class="sd">            database during this session.</span>
<span class="sd">        database (str):</span>
<span class="sd">            Name of the MongoDB database to use. Defaults to ``orion``.</span>
<span class="sd">        mongodb_config (dict or str):</span>
<span class="sd">            A dict or a path to JSON file with additional arguments can be</span>
<span class="sd">            passed to provide connection details different than the defaults</span>
<span class="sd">            for the MongoDB Database:</span>

<span class="sd">                * ``host``: Hostname or IP address of the MongoDB Instance.</span>
<span class="sd">                * ``port``: Port to which MongoDB is listening.</span>
<span class="sd">                * ``username``: username to authenticate with.</span>
<span class="sd">                * ``password``: password to authenticate with.</span>
<span class="sd">                * ``authentication_source``: database to authenticate against.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; orex = OrionExplorer(&#39;my_username&#39;)</span>

<span class="sd">        Passing a path to a JSON file with connection details.</span>

<span class="sd">        &gt;&gt;&gt; orex = OrionExplorer(</span>
<span class="sd">        ...      user=&#39;my_username&#39;,</span>
<span class="sd">        ...      database=&#39;orion&#39;,</span>
<span class="sd">        ...      mongodb_config=&#39;/path/to/my/mongodb_config.json&#39;,</span>
<span class="sd">        ... )</span>

<span class="sd">        Passing all the possible initialization arguments as a dict:</span>

<span class="sd">        &gt;&gt;&gt; mongodb_config = {</span>
<span class="sd">        ...      &#39;host&#39;: &#39;localhost&#39;,</span>
<span class="sd">        ...      &#39;port&#39;: 27017,</span>
<span class="sd">        ...      &#39;username&#39;: &#39;orion&#39;,</span>
<span class="sd">        ...      &#39;password&#39;: &#39;secret_password&#39;,</span>
<span class="sd">        ...      &#39;authentication_source&#39;: &#39;admin&#39;,</span>
<span class="sd">        ... }</span>
<span class="sd">        &gt;&gt;&gt; orex = OrionExplorer(</span>
<span class="sd">        ...      user=&#39;my_username&#39;,</span>
<span class="sd">        ...      database=&#39;orion&#39;,</span>
<span class="sd">        ...      mongodb_config=mongodb_config</span>
<span class="sd">        ... )</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="OrionDBExplorer.__init__"><a class="viewcode-back" href="../../../api_reference/api/orion.db.OrionDBExplorer.html#orion.db.OrionDBExplorer.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="s1">&#39;orion&#39;</span><span class="p">,</span> <span class="n">mongodb_config</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initiaize this OrionDBExplorer.</span>

<span class="sd">        Args:</span>
<span class="sd">            user (str):</span>
<span class="sd">                Unique identifier of the user that creates this OrionExporer</span>
<span class="sd">                instance. This username or user ID will be used to populate</span>
<span class="sd">                the ``created_by`` field of all the objects created in the</span>
<span class="sd">                database during this session.</span>
<span class="sd">            database (str):</span>
<span class="sd">                Name of the MongoDB database to use. Defaults to ``orion``.</span>
<span class="sd">            mongodb_config (dict or str):</span>
<span class="sd">                A dict or a path to JSON file with additional arguments can be</span>
<span class="sd">                passed to provide connection details different than the defaults</span>
<span class="sd">                for the MongoDB Database:</span>

<span class="sd">                    * ``host``: Hostname or IP address of the MongoDB Instance.</span>
<span class="sd">                    * ``port``: Port to which MongoDB is listening.</span>
<span class="sd">                    * ``username``: username to authenticate with.</span>
<span class="sd">                    * ``password``: password to authenticate with.</span>
<span class="sd">                    * ``authentication_source``: database to authenticate against.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">mongodb_config</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">mongodb_config</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mongodb_config</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">mongodb_config</span><span class="p">)</span> <span class="k">as</span> <span class="n">config_file</span><span class="p">:</span>
                <span class="n">mongodb_config</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mongodb_config</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">mongodb_config</span> <span class="o">=</span> <span class="n">mongodb_config</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">user</span> <span class="o">=</span> <span class="n">user</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">database</span> <span class="o">=</span> <span class="n">mongodb_config</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;database&#39;</span><span class="p">,</span> <span class="n">database</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_db</span> <span class="o">=</span> <span class="n">connect</span><span class="p">(</span><span class="n">database</span><span class="p">,</span> <span class="o">**</span><span class="n">mongodb_config</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fs</span> <span class="o">=</span> <span class="n">GridFS</span><span class="p">(</span><span class="n">Database</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_db</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="p">))</span></div>

    <span class="k">def</span> <span class="nf">drop_database</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Drop the database.</span>

<span class="sd">        This method is used for development purposes and will</span>
<span class="sd">        most likely be removed in the future.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_db</span><span class="o">.</span><span class="n">drop_database</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="p">)</span>

    <span class="c1"># ####### #</span>
    <span class="c1"># Dataset #</span>
    <span class="c1"># ####### #</span>

<div class="viewcode-block" id="OrionDBExplorer.add_dataset"><a class="viewcode-back" href="../../../api_reference/api/orion.db.OrionDBExplorer.add_dataset.html#orion.db.OrionDBExplorer.add_dataset">[docs]</a>    <span class="k">def</span> <span class="nf">add_dataset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">entity</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add a new Dataset object to the database.</span>

<span class="sd">        The Dataset needs to be given a name and, optionally, an identitifier,</span>
<span class="sd">        name or ID, of the entity which produced the Dataset.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str):</span>
<span class="sd">                Name of the Dataset</span>
<span class="sd">            entity (str):</span>
<span class="sd">                Name or Id of the entity which this Dataset is associated to.</span>
<span class="sd">                Defaults to ``None``.</span>

<span class="sd">        Raises:</span>
<span class="sd">            NotUniqueError:</span>
<span class="sd">                If a Dataset with the same name and entity values already exists.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dataset</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">schema</span><span class="o">.</span><span class="n">Dataset</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">entity</span><span class="o">=</span><span class="n">entity</span><span class="p">,</span>
            <span class="n">created_by</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="OrionDBExplorer.get_datasets"><a class="viewcode-back" href="../../../api_reference/api/orion.db.OrionDBExplorer.get_datasets.html#orion.db.OrionDBExplorer.get_datasets">[docs]</a>    <span class="k">def</span> <span class="nf">get_datasets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">entity</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">created_by</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Query the Datasets collection.</span>

<span class="sd">        All the details about the matching Datasets will be returned in</span>
<span class="sd">        a ``pandas.DataFrame``.</span>

<span class="sd">        All the arguments are optional, so a call without arguments will</span>
<span class="sd">        return a table with information about all the Datasets availabe.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str):</span>
<span class="sd">                Name of the Dataset.</span>
<span class="sd">            entity (str):</span>
<span class="sd">                Name or Id of the entity which returned Datasets need to be</span>
<span class="sd">                associated to.</span>
<span class="sd">            created_by (str):</span>
<span class="sd">                Unique identifier of the user that created the Datasets.</span>

<span class="sd">        Returns:</span>
<span class="sd">            pandas.DataFrame</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">schema</span><span class="o">.</span><span class="n">Dataset</span><span class="o">.</span><span class="n">find</span><span class="p">(</span>
            <span class="n">as_df_</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">entity</span><span class="o">=</span><span class="n">entity</span><span class="p">,</span>
            <span class="n">created_by</span><span class="o">=</span><span class="n">created_by</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="OrionDBExplorer.get_dataset"><a class="viewcode-back" href="../../../api_reference/api/orion.db.OrionDBExplorer.get_dataset.html#orion.db.OrionDBExplorer.get_dataset">[docs]</a>    <span class="k">def</span> <span class="nf">get_dataset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">entity</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">created_by</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a Dataset object from the database.</span>

<span class="sd">        All the arguments are optional but empty queries are not allowed, so at</span>
<span class="sd">        least one argument needs to be passed with a value different than ``None``.</span>

<span class="sd">        Args:</span>
<span class="sd">            dataset (Dataset, ObjectID or str):</span>
<span class="sd">                Dataset object (or the corresponding ObjectID, or its string</span>
<span class="sd">                representation) that we want to retreive.</span>
<span class="sd">            name (str):</span>
<span class="sd">                Name of the Dataset.</span>
<span class="sd">            entity (str):</span>
<span class="sd">                Name or Id of the entity which this Dataset is associated to.</span>
<span class="sd">            created_by (str):</span>
<span class="sd">                Unique identifier of the user that created the Dataset.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError:</span>
<span class="sd">                If the no arguments are passed with a value different than</span>
<span class="sd">                ``None`` or the query resolves to more than one object.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dataset</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">schema</span><span class="o">.</span><span class="n">Dataset</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">dataset</span><span class="o">=</span><span class="n">dataset</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">entity</span><span class="o">=</span><span class="n">entity</span><span class="p">,</span>
            <span class="n">created_by</span><span class="o">=</span><span class="n">created_by</span>
        <span class="p">)</span></div>

    <span class="c1"># ###### #</span>
    <span class="c1"># Signal #</span>
    <span class="c1"># ###### #</span>

<div class="viewcode-block" id="OrionDBExplorer.add_signal"><a class="viewcode-back" href="../../../api_reference/api/orion.db.OrionDBExplorer.add_signal.html#orion.db.OrionDBExplorer.add_signal">[docs]</a>    <span class="k">def</span> <span class="nf">add_signal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">dataset</span><span class="p">,</span> <span class="n">data_location</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                   <span class="n">stop_time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timestamp_column</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">value_column</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                   <span class="n">abspath</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add a new Signal object to the database.</span>

<span class="sd">        The signal needs to be given a name and be associated to a Dataset.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str):</span>
<span class="sd">                Name of the Signal.</span>
<span class="sd">            dataset (Dataset or ObjectID or str):</span>
<span class="sd">                Dataset object which the created Signal belongs to or the</span>
<span class="sd">                corresponding ObjectId.</span>
<span class="sd">            data_location (str):</span>
<span class="sd">                Path to the CSV containing the Signal data. If the signal is</span>
<span class="sd">                one of the signals provided by Orion, this can be omitted and</span>
<span class="sd">                the signal will be loaded based on the signal name.</span>
<span class="sd">            start_time (int):</span>
<span class="sd">                Optional. Minimum timestamp to use for this signal. If not provided</span>
<span class="sd">                this defaults to the minimum timestamp found in the signal data.</span>
<span class="sd">            stop_time (int):</span>
<span class="sd">                Optional. Maximum timestamp to use for this signal. If not provided</span>
<span class="sd">                this defaults to the maximum timestamp found in the signal data.</span>
<span class="sd">            timestamp_column (int):</span>
<span class="sd">                Optional. Index of the timestamp column.</span>
<span class="sd">            value_column (int):</span>
<span class="sd">                Optional. Index of the value column.</span>
<span class="sd">            abspath (bool):</span>
<span class="sd">                Optional. Whether to store data location in absolute path.</span>

<span class="sd">        Raises:</span>
<span class="sd">            NotUniqueError:</span>
<span class="sd">                If a Signal with the same name already exists for this Dataset.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Signal</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data_location</span> <span class="o">=</span> <span class="n">data_location</span> <span class="ow">or</span> <span class="n">name</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">load_signal</span><span class="p">(</span><span class="n">data_location</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">timestamp_column</span><span class="p">,</span> <span class="n">value_column</span><span class="p">)</span>
        <span class="n">timestamps</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">start_time</span><span class="p">:</span>
            <span class="n">start_time</span> <span class="o">=</span> <span class="n">timestamps</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">stop_time</span><span class="p">:</span>
            <span class="n">stop_time</span> <span class="o">=</span> <span class="n">timestamps</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">abspath</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">data_location</span><span class="p">):</span>
            <span class="n">data_location</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">abspath</span><span class="p">)</span>

        <span class="n">dataset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_dataset</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">schema</span><span class="o">.</span><span class="n">Signal</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">dataset</span><span class="o">=</span><span class="n">dataset</span><span class="p">,</span>
            <span class="n">start_time</span><span class="o">=</span><span class="n">start_time</span><span class="p">,</span>
            <span class="n">stop_time</span><span class="o">=</span><span class="n">stop_time</span><span class="p">,</span>
            <span class="n">data_location</span><span class="o">=</span><span class="n">data_location</span><span class="p">,</span>
            <span class="n">timestamp_column</span><span class="o">=</span><span class="n">timestamp_column</span><span class="p">,</span>
            <span class="n">value_column</span><span class="o">=</span><span class="n">value_column</span><span class="p">,</span>
            <span class="n">created_by</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="OrionDBExplorer.add_signals"><a class="viewcode-back" href="../../../api_reference/api/orion.db.OrionDBExplorer.add_signals.html#orion.db.OrionDBExplorer.add_signals">[docs]</a>    <span class="k">def</span> <span class="nf">add_signals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataset</span><span class="p">,</span> <span class="n">signals_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                    <span class="n">stop_time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timestamp_column</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">value_column</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                    <span class="n">abspath</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add a multiple Signal objects to the database.</span>

<span class="sd">        All the signals will be added to the Dataset using the CSV filename</span>
<span class="sd">        as their name.</span>

<span class="sd">        Args:</span>
<span class="sd">            dataset (Dataset or ObjectID or str):</span>
<span class="sd">                Dataset object which the created Signals belongs to or the</span>
<span class="sd">                corresponding ObjectId.</span>
<span class="sd">            signals_path (str):</span>
<span class="sd">                Path to the folder where the signals can be found. All the CSV</span>
<span class="sd">                files in this folder will be added.</span>
<span class="sd">            start_time (int):</span>
<span class="sd">                Optional. Minimum timestamp to use for these signals. If not provided</span>
<span class="sd">                this defaults to the minimum timestamp found in the signal data.</span>
<span class="sd">            stop_time (int):</span>
<span class="sd">                Optional. Maximum timestamp to use for these signals. If not provided</span>
<span class="sd">                this defaults to the maximum timestamp found in the signal data.</span>
<span class="sd">            timestamp_column (int):</span>
<span class="sd">                Optional. Index of the timestamp column.</span>
<span class="sd">            value_column (int):</span>
<span class="sd">                Optional. Index of the value column.</span>
<span class="sd">            abspath (bool):</span>
<span class="sd">                Optional. Whether to store data location in absolute path.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">signals_path</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">filename</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.csv&#39;</span><span class="p">):</span>
                <span class="n">signal_name</span> <span class="o">=</span> <span class="n">filename</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>   <span class="c1"># remove from filename .csv</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">add_signal</span><span class="p">(</span>
                        <span class="n">name</span><span class="o">=</span><span class="n">signal_name</span><span class="p">,</span>
                        <span class="n">dataset</span><span class="o">=</span><span class="n">dataset</span><span class="p">,</span>
                        <span class="n">data_location</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">signals_path</span><span class="p">,</span> <span class="n">filename</span><span class="p">),</span>
                        <span class="n">start_time</span><span class="o">=</span><span class="n">start_time</span><span class="p">,</span>
                        <span class="n">stop_time</span><span class="o">=</span><span class="n">stop_time</span><span class="p">,</span>
                        <span class="n">timestamp_column</span><span class="o">=</span><span class="n">timestamp_column</span><span class="p">,</span>
                        <span class="n">value_column</span><span class="o">=</span><span class="n">value_column</span><span class="p">,</span>
                        <span class="n">abspath</span><span class="o">=</span><span class="n">abspath</span>
                    <span class="p">)</span>
                <span class="k">except</span> <span class="n">NotUniqueError</span><span class="p">:</span>
                    <span class="k">pass</span></div>

<div class="viewcode-block" id="OrionDBExplorer.get_signals"><a class="viewcode-back" href="../../../api_reference/api/orion.db.OrionDBExplorer.get_signals.html#orion.db.OrionDBExplorer.get_signals">[docs]</a>    <span class="k">def</span> <span class="nf">get_signals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dataset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">created_by</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Query the Signals collection.</span>

<span class="sd">        All the details about the matching Signals will be returned in</span>
<span class="sd">        a ``pandas.DataFrame``.</span>

<span class="sd">        All the arguments are optional, so a call without arguments will</span>
<span class="sd">        return a table with information about all the Signals availabe.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str):</span>
<span class="sd">                Name of the Signal.</span>
<span class="sd">            dataset (Dataset, ObjectID or str):</span>
<span class="sd">                Dataset object (or the corresponding ObjectID, or its string</span>
<span class="sd">                representation) to which the Signals have to belong.</span>
<span class="sd">            created_by (str):</span>
<span class="sd">                Unique identifier of the user that created the Signals.</span>

<span class="sd">        Returns:</span>
<span class="sd">            pandas.DataFrame</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">schema</span><span class="o">.</span><span class="n">Signal</span><span class="o">.</span><span class="n">find</span><span class="p">(</span>
            <span class="n">as_df_</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">dataset</span><span class="o">=</span><span class="n">dataset</span><span class="p">,</span>
            <span class="n">created_by</span><span class="o">=</span><span class="n">created_by</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="OrionDBExplorer.get_signal"><a class="viewcode-back" href="../../../api_reference/api/orion.db.OrionDBExplorer.get_signal.html#orion.db.OrionDBExplorer.get_signal">[docs]</a>    <span class="k">def</span> <span class="nf">get_signal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">signal</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dataset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">created_by</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a Signal object from the database.</span>

<span class="sd">        All the arguments are optional but empty queries are not allowed, so at</span>
<span class="sd">        least one argument needs to be passed with a value different than ``None``.</span>

<span class="sd">        Args:</span>
<span class="sd">            signal (Signal, ObjectID or str):</span>
<span class="sd">                Signal object (or the corresponding ObjectID, or its string</span>
<span class="sd">                representation) that we want to retreive.</span>
<span class="sd">            name (str):</span>
<span class="sd">                Name of the Signal.</span>
<span class="sd">            dataset (Dataset, ObjectID or str):</span>
<span class="sd">                Dataset object (or the corresponding ObjectID, or its string</span>
<span class="sd">                representation) to which the Signal has to belong.</span>
<span class="sd">            created_by (str):</span>
<span class="sd">                Unique identifier of the user that created the Signals.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError:</span>
<span class="sd">                If the no arguments are passed with a value different than</span>
<span class="sd">                ``None`` or the query resolves to more than one object.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Signal</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">schema</span><span class="o">.</span><span class="n">Signal</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">signal</span><span class="o">=</span><span class="n">signal</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">dataset</span><span class="o">=</span><span class="n">dataset</span><span class="p">,</span>
            <span class="n">created_by</span><span class="o">=</span><span class="n">created_by</span>
        <span class="p">)</span></div>

    <span class="c1"># ######## #</span>
    <span class="c1"># Template #</span>
    <span class="c1"># ######## #</span>

<div class="viewcode-block" id="OrionDBExplorer.add_template"><a class="viewcode-back" href="../../../api_reference/api/orion.db.OrionDBExplorer.add_template.html#orion.db.OrionDBExplorer.add_template">[docs]</a>    <span class="k">def</span> <span class="nf">add_template</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">template</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add a new Template object to the database.</span>

<span class="sd">        The template can be passed as a name of a registered MLPipeline,</span>
<span class="sd">        or as a path to an MLPipeline JSON specification, or as a full</span>
<span class="sd">        dictionary specification of an MLPipeline or directly as an</span>
<span class="sd">        MLPipeline instance.</span>

<span class="sd">        If the ``template`` argument is not passed, the given ``name`` will</span>
<span class="sd">        be used to load an MLPipeline.</span>

<span class="sd">        During this step, apart from the Template object, a new Pipeline object</span>
<span class="sd">        using the default hyperparameters and with the same name as the</span>
<span class="sd">        Template will also be created.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str):</span>
<span class="sd">                Name of the Template.</span>
<span class="sd">            template (str, dict or MLPipeline):</span>
<span class="sd">                Name of the MLBlocks template to load or path to its JSON</span>
<span class="sd">                file or dictionary specification or MLPipeline instance.</span>
<span class="sd">                If not given, the ``name`` of the template is used.</span>

<span class="sd">        Raises:</span>
<span class="sd">            NotUniqueError:</span>
<span class="sd">                If a Template with the same name already exists.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Template</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">template</span> <span class="o">=</span> <span class="n">template</span> <span class="ow">or</span> <span class="n">name</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">template</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">template</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

        <span class="n">pipeline_dict</span> <span class="o">=</span> <span class="n">MLPipeline</span><span class="p">(</span><span class="n">template</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>

        <span class="n">template</span> <span class="o">=</span> <span class="n">schema</span><span class="o">.</span><span class="n">Template</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">json</span><span class="o">=</span><span class="n">pipeline_dict</span><span class="p">,</span>
            <span class="n">created_by</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span>
        <span class="p">)</span>
        <span class="n">schema</span><span class="o">.</span><span class="n">Pipeline</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">,</span>
            <span class="n">json</span><span class="o">=</span><span class="n">pipeline_dict</span><span class="p">,</span>
            <span class="n">created_by</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">template</span></div>

<div class="viewcode-block" id="OrionDBExplorer.get_templates"><a class="viewcode-back" href="../../../api_reference/api/orion.db.OrionDBExplorer.get_templates.html#orion.db.OrionDBExplorer.get_templates">[docs]</a>    <span class="k">def</span> <span class="nf">get_templates</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">created_by</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Query the Templates collection.</span>

<span class="sd">        All the details about the matching Templates will be returned in</span>
<span class="sd">        a ``pandas.DataFrame``, except for the JSON specification of the</span>
<span class="sd">        template, which will be removed from the table for readability.</span>

<span class="sd">        In order to access the JSON specification of each Template, please</span>
<span class="sd">        retreive them using the ``get_template`` method.</span>

<span class="sd">        All the arguments are optional, so a call without arguments will</span>
<span class="sd">        return a table with information about all the Templates availabe.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str):</span>
<span class="sd">                Name of the Template.</span>
<span class="sd">            created_by (str):</span>
<span class="sd">                Unique identifier of the user that created the Templates.</span>

<span class="sd">        Returns:</span>
<span class="sd">            pandas.DataFrame</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">schema</span><span class="o">.</span><span class="n">Template</span><span class="o">.</span><span class="n">find</span><span class="p">(</span>
            <span class="n">as_df_</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">created_by</span><span class="o">=</span><span class="n">created_by</span><span class="p">,</span>
            <span class="n">exclude_</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;json&#39;</span><span class="p">]</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="OrionDBExplorer.get_template"><a class="viewcode-back" href="../../../api_reference/api/orion.db.OrionDBExplorer.get_template.html#orion.db.OrionDBExplorer.get_template">[docs]</a>    <span class="k">def</span> <span class="nf">get_template</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">template</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">created_by</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a Template object from the database.</span>

<span class="sd">        All the arguments are optional but empty queries are not allowed, so at</span>
<span class="sd">        least one argument needs to be passed with a value different than ``None``.</span>

<span class="sd">        Args:</span>
<span class="sd">            template (Template, ObjectID or str):</span>
<span class="sd">                Template object (or the corresponding ObjectID, or its string</span>
<span class="sd">                representation) that we want to retreive.</span>
<span class="sd">            name (str):</span>
<span class="sd">                Name of the Template.</span>
<span class="sd">            created_by (str):</span>
<span class="sd">                Unique identifier of the user that created the Templates.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError:</span>
<span class="sd">                If the no arguments are passed with a value different than</span>
<span class="sd">                ``None`` or the query resolves to more than one object.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Template</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">schema</span><span class="o">.</span><span class="n">Template</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">created_by</span><span class="o">=</span><span class="n">created_by</span>
        <span class="p">)</span></div>

    <span class="c1"># ######## #</span>
    <span class="c1"># Pipeline #</span>
    <span class="c1"># ######## #</span>

<div class="viewcode-block" id="OrionDBExplorer.add_pipeline"><a class="viewcode-back" href="../../../api_reference/api/orion.db.OrionDBExplorer.add_pipeline.html#orion.db.OrionDBExplorer.add_pipeline">[docs]</a>    <span class="k">def</span> <span class="nf">add_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">template</span><span class="p">,</span> <span class="n">hyperparameters</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add a new Pipeline object to the database.</span>

<span class="sd">        The Pipeline will consist on a copy of the given Template using</span>
<span class="sd">        the indicated hyperparameters.</span>

<span class="sd">        The hyperparameters can be passed as a dictionary containing the</span>
<span class="sd">        hyperparameter values following the MLBlocks specification format,</span>
<span class="sd">        or a path to a JSON file containing the corresponding values.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str):</span>
<span class="sd">                Name of the Pipeline.</span>
<span class="sd">            template (Template or ObjectID or str):</span>
<span class="sd">                Template object (or the corresponding ObjectID, or its string</span>
<span class="sd">                representation) that we want to use to create this Pipeline.</span>
<span class="sd">            hyperparamers (dict or str):</span>
<span class="sd">                dict containing the hyperparameter values following the MLBlocks</span>
<span class="sd">                specification format, or a path to a JSON file containing the</span>
<span class="sd">                corresponding values.</span>

<span class="sd">        Raises:</span>
<span class="sd">            NotUniqueError:</span>
<span class="sd">                If a Pipeline with the same name for this Template already exists.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Pipeline</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pipeline</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_template</span><span class="p">(</span><span class="n">template</span><span class="p">)</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">hyperparameters</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">hyperparameters</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">hyperparameters</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

        <span class="n">pipeline</span><span class="o">.</span><span class="n">set_hyperparameters</span><span class="p">(</span><span class="n">hyperparameters</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">schema</span><span class="o">.</span><span class="n">Pipeline</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">,</span>
            <span class="n">json</span><span class="o">=</span><span class="n">pipeline</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>
            <span class="n">created_by</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="OrionDBExplorer.get_pipelines"><a class="viewcode-back" href="../../../api_reference/api/orion.db.OrionDBExplorer.get_pipelines.html#orion.db.OrionDBExplorer.get_pipelines">[docs]</a>    <span class="k">def</span> <span class="nf">get_pipelines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">template</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">created_by</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Query the Pipelines collection.</span>

<span class="sd">        All the details about the matching Pipelines will be returned in</span>
<span class="sd">        a ``pandas.DataFrame``, except for the JSON specification of the</span>
<span class="sd">        pipeline, which will be removed from the table for readability.</span>

<span class="sd">        In order to access the JSON specification of each Pipeline, please</span>
<span class="sd">        retreive them using the ``get_pipeline`` method.</span>

<span class="sd">        All the arguments are optional, so a call without arguments will</span>
<span class="sd">        return a table with information about all the Pipelines availabe.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str):</span>
<span class="sd">                Name of the Pipeline.</span>
<span class="sd">            template (Template or ObjectID or str):</span>
<span class="sd">                Template object (or the corresponding ObjectID, or its string</span>
<span class="sd">                representation) from which the Pipelines have to be derived.</span>
<span class="sd">            created_by (str):</span>
<span class="sd">                Unique identifier of the user that created the Pipelines.</span>

<span class="sd">        Returns:</span>
<span class="sd">            pandas.DataFrame</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">schema</span><span class="o">.</span><span class="n">Pipeline</span><span class="o">.</span><span class="n">find</span><span class="p">(</span>
            <span class="n">as_df_</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">,</span>
            <span class="n">created_by</span><span class="o">=</span><span class="n">created_by</span><span class="p">,</span>
            <span class="n">exclude_</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;json&#39;</span><span class="p">]</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="OrionDBExplorer.get_pipeline"><a class="viewcode-back" href="../../../api_reference/api/orion.db.OrionDBExplorer.get_pipeline.html#orion.db.OrionDBExplorer.get_pipeline">[docs]</a>    <span class="k">def</span> <span class="nf">get_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pipeline</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">template</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">created_by</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a Pipeline object from the database.</span>

<span class="sd">        All the arguments are optional but empty queries are not allowed, so at</span>
<span class="sd">        least one argument needs to be passed with a value different than ``None``.</span>

<span class="sd">        Args:</span>
<span class="sd">            pipeline (Template, ObjectID or str):</span>
<span class="sd">                Pipeline object (or the corresponding ObjectID, or its string</span>
<span class="sd">                representation) that we want to retreive.</span>
<span class="sd">            name (str):</span>
<span class="sd">                Name of the Pipeline.</span>
<span class="sd">            template (Template or ObjectID or str):</span>
<span class="sd">                Template object (or the corresponding ObjectID, or its string</span>
<span class="sd">                representation) from which the Pipeline has to be derived.</span>
<span class="sd">            created_by (str):</span>
<span class="sd">                Unique identifier of the user that created the Pipeline.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError:</span>
<span class="sd">                If the no arguments are passed with a value different than</span>
<span class="sd">                ``None`` or the query resolves to more than one object.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Pipeline</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">schema</span><span class="o">.</span><span class="n">Pipeline</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">pipeline</span><span class="o">=</span><span class="n">pipeline</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">,</span>
            <span class="n">created_by</span><span class="o">=</span><span class="n">created_by</span><span class="p">,</span>
        <span class="p">)</span></div>

    <span class="c1"># ########## #</span>
    <span class="c1"># Experiment #</span>
    <span class="c1"># ########## #</span>

<div class="viewcode-block" id="OrionDBExplorer.add_experiment"><a class="viewcode-back" href="../../../api_reference/api/orion.db.OrionDBExplorer.add_experiment.html#orion.db.OrionDBExplorer.add_experiment">[docs]</a>    <span class="k">def</span> <span class="nf">add_experiment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">template</span><span class="p">,</span> <span class="n">dataset</span><span class="p">,</span> <span class="n">signals</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add a new Experiment object to the database.</span>

<span class="sd">        The Experiment will have to be associated to a Template and a Dataset.</span>

<span class="sd">        Optionally, a list of Signal objects or the corresponding ObjectIds have to</span>
<span class="sd">        can be passed to associate this Experiment to only a subset of Signals from</span>
<span class="sd">        the Dataset. In this case, the Signals passed need to be part of the Dataset,</span>
<span class="sd">        otherwise an Exception will be raised.</span>

<span class="sd">        If no Signals are passed, all the Signals from the Dataset are used.</span>

<span class="sd">        A project name can also be passed as a string to group experiments of</span>
<span class="sd">        a single project together.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str):</span>
<span class="sd">                Name of the Experiment.</span>
<span class="sd">            template (Template or ObjectID or str):</span>
<span class="sd">                Template object (or the corresponding ObjectID, or its string</span>
<span class="sd">                representation) that we want to use in this Experiment.</span>
<span class="sd">            dataset (Dataset or ObjectID or str):</span>
<span class="sd">                Dataset object (or the corresponding ObjectID, or its string</span>
<span class="sd">                representation) which will be used for this Experiment.</span>
<span class="sd">            signals (list[Signal, ObjectId or str]):</span>
<span class="sd">                list of Signals (or their corresponding ObjectIds) to be used for</span>
<span class="sd">                this Experiment.</span>
<span class="sd">            project (str):</span>
<span class="sd">                Name of the project which this Experiment belongs to.</span>

<span class="sd">        Raises:</span>
<span class="sd">            NotUniqueError:</span>
<span class="sd">                If an Experiment with the same name for this Template already exists.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Experiment</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dataset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_dataset</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">signals</span><span class="p">:</span>
            <span class="n">signals</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">signals</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">signal</span> <span class="ow">in</span> <span class="n">signals</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_signal</span><span class="p">(</span><span class="n">signal</span><span class="p">)</span><span class="o">.</span><span class="n">dataset</span> <span class="o">!=</span> <span class="n">dataset</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;All Signals must belong to the Dataset&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">schema</span><span class="o">.</span><span class="n">Experiment</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">,</span>
            <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">,</span>
            <span class="n">dataset</span><span class="o">=</span><span class="n">dataset</span><span class="p">,</span>
            <span class="n">signals</span><span class="o">=</span><span class="n">signals</span><span class="p">,</span>
            <span class="n">created_by</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="OrionDBExplorer.get_experiments"><a class="viewcode-back" href="../../../api_reference/api/orion.db.OrionDBExplorer.get_experiments.html#orion.db.OrionDBExplorer.get_experiments">[docs]</a>    <span class="k">def</span> <span class="nf">get_experiments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">template</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dataset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">signals</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">created_by</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Query the Experiments collection.</span>

<span class="sd">        All the details about the matching Experiments will be returned in</span>
<span class="sd">        a ``pandas.DataFrame``.</span>

<span class="sd">        All the arguments are optional, so a call without arguments will</span>
<span class="sd">        return a table with information about all the Experiments availabe.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str):</span>
<span class="sd">                Name of the Experiment.</span>
<span class="sd">            template (Template or ObjectID or str):</span>
<span class="sd">                Template that the Experiments must use.</span>
<span class="sd">            dataset (Dataset or ObjectID or str):</span>
<span class="sd">                Dataset that the Experiments must use.</span>
<span class="sd">            signals (list[Signal, ObjectId or str]):</span>
<span class="sd">                Signals that the Experiments must use.</span>
<span class="sd">            project (str):</span>
<span class="sd">                Name of the project which the Experiments must belong to.</span>
<span class="sd">            created_by (str):</span>
<span class="sd">                Unique identifier of the user that created the Experiments.</span>

<span class="sd">        Returns:</span>
<span class="sd">            pandas.DataFrame</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">schema</span><span class="o">.</span><span class="n">Experiment</span><span class="o">.</span><span class="n">find</span><span class="p">(</span>
            <span class="n">as_df_</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">,</span>
            <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">,</span>
            <span class="n">dataset</span><span class="o">=</span><span class="n">dataset</span><span class="p">,</span>
            <span class="n">signals</span><span class="o">=</span><span class="n">signals</span><span class="p">,</span>
            <span class="n">created_by</span><span class="o">=</span><span class="n">created_by</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="OrionDBExplorer.get_experiment"><a class="viewcode-back" href="../../../api_reference/api/orion.db.OrionDBExplorer.get_experiment.html#orion.db.OrionDBExplorer.get_experiment">[docs]</a>    <span class="k">def</span> <span class="nf">get_experiment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">experiment</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">template</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                       <span class="n">dataset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">signals</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">created_by</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get an Experiment object from the database.</span>

<span class="sd">        All the arguments are optional but empty queries are not allowed, so at</span>
<span class="sd">        least one argument needs to be passed with a value different than ``None``.</span>

<span class="sd">        Args:</span>
<span class="sd">            experiment (Experiment, ObjectID or str):</span>
<span class="sd">                Experiment object (or the corresponding ObjectID, or its string</span>
<span class="sd">                representation) that we want to retreive.</span>
<span class="sd">            name (str):</span>
<span class="sd">                Name of the Experiment.</span>
<span class="sd">            template (Template or ObjectID or str):</span>
<span class="sd">                Template that the Experiment must use.</span>
<span class="sd">            dataset (Dataset or ObjectID or str):</span>
<span class="sd">                Dataset that the Experiment must use.</span>
<span class="sd">            signals (list[Signal, ObjectId or str]):</span>
<span class="sd">                Signals that the Experiment must use.</span>
<span class="sd">            project (str):</span>
<span class="sd">                Name of the project which the Experiment must belong to.</span>
<span class="sd">            created_by (str):</span>
<span class="sd">                Unique identifier of the user that created the Experiment.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError:</span>
<span class="sd">                If the no arguments are passed with a value different than</span>
<span class="sd">                ``None`` or the query resolves to more than one object.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Experiment</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">schema</span><span class="o">.</span><span class="n">Experiment</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">experiment</span><span class="o">=</span><span class="n">experiment</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">,</span>
            <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">,</span>
            <span class="n">dataset</span><span class="o">=</span><span class="n">dataset</span><span class="p">,</span>
            <span class="n">signals</span><span class="o">=</span><span class="n">signals</span><span class="p">,</span>
            <span class="n">created_by</span><span class="o">=</span><span class="n">created_by</span><span class="p">,</span>
        <span class="p">)</span></div>

    <span class="c1"># ####### #</span>
    <span class="c1"># Datarun #</span>
    <span class="c1"># ####### #</span>

<div class="viewcode-block" id="OrionDBExplorer.add_datarun"><a class="viewcode-back" href="../../../api_reference/api/orion.db.OrionDBExplorer.add_datarun.html#orion.db.OrionDBExplorer.add_datarun">[docs]</a>    <span class="k">def</span> <span class="nf">add_datarun</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">experiment</span><span class="p">,</span> <span class="n">pipeline</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add a new Datarun object to the database.</span>

<span class="sd">        The Datarun needs to be associated to an Experiment and a Pipeline.</span>

<span class="sd">        Args:</span>
<span class="sd">            experiment (Experiment or ObjectID or str):</span>
<span class="sd">                Experiment object (or the corresponding ObjectID, or its string</span>
<span class="sd">                representation) to which this Datarun belongs.</span>
<span class="sd">            pipeline (Pipeline or ObjectID or str):</span>
<span class="sd">                Pipeline object (or the corresponding ObjectID, or its string</span>
<span class="sd">                representation) used by this Datarun.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Datarun</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">schema</span><span class="o">.</span><span class="n">Datarun</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span>
            <span class="n">experiment</span><span class="o">=</span><span class="n">experiment</span><span class="p">,</span>
            <span class="n">pipeline</span><span class="o">=</span><span class="n">pipeline</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="OrionDBExplorer.get_dataruns"><a class="viewcode-back" href="../../../api_reference/api/orion.db.OrionDBExplorer.get_dataruns.html#orion.db.OrionDBExplorer.get_dataruns">[docs]</a>    <span class="k">def</span> <span class="nf">get_dataruns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">experiment</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">pipeline</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Query the Dataruns collection.</span>

<span class="sd">        All the details about the matching Dataruns will be returned in</span>
<span class="sd">        a ``pandas.DataFrame``.</span>

<span class="sd">        All the arguments are optional, so a call without arguments will</span>
<span class="sd">        return a table with information about all the Dataruns availabe.</span>

<span class="sd">        Args:</span>
<span class="sd">            experiment (Experiment or ObjectID or str):</span>
<span class="sd">                Experiment to which the Dataruns must belong.</span>
<span class="sd">            pipeline (Pipeline or ObjectID or str):</span>
<span class="sd">                Pipeline which the Dataruns must use.</span>
<span class="sd">            status (str):</span>
<span class="sd">                Status which the Dataruns must have.</span>

<span class="sd">        Returns:</span>
<span class="sd">            pandas.DataFrame</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">schema</span><span class="o">.</span><span class="n">Datarun</span><span class="o">.</span><span class="n">find</span><span class="p">(</span>
            <span class="n">as_df_</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">experiment</span><span class="o">=</span><span class="n">experiment</span><span class="p">,</span>
            <span class="n">pipeline</span><span class="o">=</span><span class="n">pipeline</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
            <span class="n">exclude_</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;software_versions&#39;</span><span class="p">],</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="OrionDBExplorer.get_datarun"><a class="viewcode-back" href="../../../api_reference/api/orion.db.OrionDBExplorer.get_datarun.html#orion.db.OrionDBExplorer.get_datarun">[docs]</a>    <span class="k">def</span> <span class="nf">get_datarun</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">datarun</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">experiment</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">pipeline</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a Datarun object from the database.</span>

<span class="sd">        All the arguments are optional but empty queries are not allowed, so at</span>
<span class="sd">        least one argument needs to be passed with a value different than ``None``.</span>

<span class="sd">        Args:</span>
<span class="sd">            datarun (Datarun, ObjectID or str):</span>
<span class="sd">                Datarun object (or the corresponding ObjectID, or its string</span>
<span class="sd">                representation) that we want to retreive.</span>
<span class="sd">            experiment (Experiment or ObjectID or str):</span>
<span class="sd">                Experiment to which the Datarun must belong.</span>
<span class="sd">            pipeline (Pipeline or ObjectID or str):</span>
<span class="sd">                Pipeline which the Datarun must use.</span>
<span class="sd">            status (str):</span>
<span class="sd">                Status which the Datarun must have.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError:</span>
<span class="sd">                If the no arguments are passed with a value different than</span>
<span class="sd">                ``None`` or the query resolves to more than one object.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Datarun</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">schema</span><span class="o">.</span><span class="n">Datarun</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">experiment</span><span class="o">=</span><span class="n">experiment</span><span class="p">,</span>
            <span class="n">pipeline</span><span class="o">=</span><span class="n">pipeline</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
        <span class="p">)</span></div>

    <span class="c1"># ######### #</span>
    <span class="c1"># Signalrun #</span>
    <span class="c1"># ######### #</span>

<div class="viewcode-block" id="OrionDBExplorer.add_signalrun"><a class="viewcode-back" href="../../../api_reference/api/orion.db.OrionDBExplorer.add_signalrun.html#orion.db.OrionDBExplorer.add_signalrun">[docs]</a>    <span class="k">def</span> <span class="nf">add_signalrun</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">datarun</span><span class="p">,</span> <span class="n">signal</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add a new Signalrun object to the database.</span>

<span class="sd">        The Signalrun needs to be associated to a Datarun and a Signal.</span>

<span class="sd">        Args:</span>
<span class="sd">            datarun (Datarun or ObjectID or str):</span>
<span class="sd">                Datarun object (or the corresponding ObjectID, or its string</span>
<span class="sd">                representation) to which this Signalrun belongs.</span>
<span class="sd">            signal (Signal or ObjectID or str):</span>
<span class="sd">                Signal object (or the corresponding ObjectID, or its string</span>
<span class="sd">                representation) used by this Signalrun.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Datarun</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">schema</span><span class="o">.</span><span class="n">Signalrun</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span>
            <span class="n">datarun</span><span class="o">=</span><span class="n">datarun</span><span class="p">,</span>
            <span class="n">signal</span><span class="o">=</span><span class="n">signal</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="OrionDBExplorer.get_signalruns"><a class="viewcode-back" href="../../../api_reference/api/orion.db.OrionDBExplorer.get_signalruns.html#orion.db.OrionDBExplorer.get_signalruns">[docs]</a>    <span class="k">def</span> <span class="nf">get_signalruns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">datarun</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">signal</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Query the Signalruns collection.</span>

<span class="sd">        All the details about the matching Signalruns will be returned in</span>
<span class="sd">        a ``pandas.DataFrame``.</span>

<span class="sd">        All the arguments are optional, so a call without arguments will</span>
<span class="sd">        return a table with information about all the Dataruns availabe.</span>

<span class="sd">        Args:</span>
<span class="sd">            datarun (Datarun or ObjectID or str):</span>
<span class="sd">                Datarun to which the Signalruns must belong.</span>
<span class="sd">            signal (Signal or ObjectID or str):</span>
<span class="sd">                Signal which the Signalruns must use.</span>
<span class="sd">            status (str):</span>
<span class="sd">                Status which the Signalruns must have.</span>

<span class="sd">        Returns:</span>
<span class="sd">            pandas.DataFrame</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">schema</span><span class="o">.</span><span class="n">Signalrun</span><span class="o">.</span><span class="n">find</span><span class="p">(</span>
            <span class="n">as_df_</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">datarun</span><span class="o">=</span><span class="n">datarun</span><span class="p">,</span>
            <span class="n">signal</span><span class="o">=</span><span class="n">signal</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="OrionDBExplorer.get_signalrun"><a class="viewcode-back" href="../../../api_reference/api/orion.db.OrionDBExplorer.get_signalrun.html#orion.db.OrionDBExplorer.get_signalrun">[docs]</a>    <span class="k">def</span> <span class="nf">get_signalrun</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">signalrun</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">datarun</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">signal</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a Signalrun object from the database.</span>

<span class="sd">        All the arguments are optional but empty queries are not allowed, so at</span>
<span class="sd">        least one argument needs to be passed with a value different than ``None``.</span>

<span class="sd">        Args:</span>
<span class="sd">            signalrun (Signalrun, ObjectID or str):</span>
<span class="sd">                Signalrun object (or the corresponding ObjectID, or its string</span>
<span class="sd">                representation) that we want to retreive.</span>
<span class="sd">            datarun (Datarun or ObjectID or str):</span>
<span class="sd">                Datarun to which the Signalrun must belong.</span>
<span class="sd">            signal (Signal or ObjectID or str):</span>
<span class="sd">                Signal which the Signalrun must use.</span>
<span class="sd">            status (str):</span>
<span class="sd">                Status which the Signalrun must have.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError:</span>
<span class="sd">                If the no arguments are passed with a value different than</span>
<span class="sd">                ``None`` or the query resolves to more than one object.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Signalrun</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">schema</span><span class="o">.</span><span class="n">Signalrun</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">signalrun</span><span class="o">=</span><span class="n">signalrun</span><span class="p">,</span>
            <span class="n">datarun</span><span class="o">=</span><span class="n">datarun</span><span class="p">,</span>
            <span class="n">signal</span><span class="o">=</span><span class="n">signal</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
        <span class="p">)</span></div>

    <span class="c1"># ##### #</span>
    <span class="c1"># Event #</span>
    <span class="c1"># ##### #</span>

<div class="viewcode-block" id="OrionDBExplorer.add_event"><a class="viewcode-back" href="../../../api_reference/api/orion.db.OrionDBExplorer.add_event.html#orion.db.OrionDBExplorer.add_event">[docs]</a>    <span class="k">def</span> <span class="nf">add_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_time</span><span class="p">,</span> <span class="n">stop_time</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">severity</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                  <span class="n">signalrun</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">signal</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add a new Event object to the database.</span>

<span class="sd">        The Event needs to have at least a start_time and a stop_time,</span>
<span class="sd">        and be associated to either a Signal or a Signalrun.</span>

<span class="sd">        If a Signalrun is given but no Signal is, the created Event will</span>
<span class="sd">        be associated to the Signalrun signal value.</span>

<span class="sd">        If both a Signalrun and a Signal are given, the Signal must be</span>
<span class="sd">        the one used by the Signalrun.</span>

<span class="sd">        Args:</span>
<span class="sd">            start_time (int):</span>
<span class="sd">                Timestamp at which the event starts.</span>
<span class="sd">            stop_time (int):</span>
<span class="sd">                Timestamp at which the event ends.</span>
<span class="sd">            source (str):</span>
<span class="sd">                Description of where this Event was created. It must be &quot;orion&quot;,</span>
<span class="sd">                &quot;shape matching&quot; or &quot;manually created&quot;.</span>
<span class="sd">            severity (float):</span>
<span class="sd">                Severity score value. Optional.</span>
<span class="sd">            signalrun (Signalrun or ObjectID or str):</span>
<span class="sd">                Signalrun object (or the corresponding ObjectID, or its string</span>
<span class="sd">                representation) to which this Event is associated.</span>
<span class="sd">            signal (Signal or ObjectID or str):</span>
<span class="sd">                Signal object (or the corresponding ObjectID, or its string</span>
<span class="sd">                representation) to which this Event is associated.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError:</span>
<span class="sd">                if neither a Signal or a Signalrun are given, or if the Signal</span>
<span class="sd">                is not the one used by the Signalrun.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Event</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">signal</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">signalrun</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;An Event must be associated to either a Signalrun or a Signal&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">signal</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">signalrun</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_signal</span><span class="p">(</span><span class="n">signal</span><span class="p">)</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_signalrun</span><span class="p">(</span><span class="n">signalrun</span><span class="p">)</span><span class="o">.</span><span class="n">signal</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Signal cannot be different than Signalrun.signal&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">schema</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span>
            <span class="n">signalrun</span><span class="o">=</span><span class="n">signalrun</span><span class="p">,</span>
            <span class="n">signal</span><span class="o">=</span><span class="n">signal</span> <span class="ow">or</span> <span class="n">signalrun</span><span class="o">.</span><span class="n">signal</span><span class="p">,</span>
            <span class="n">start_time</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">start_time</span><span class="p">),</span>
            <span class="n">stop_time</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">stop_time</span><span class="p">),</span>
            <span class="n">severity</span><span class="o">=</span><span class="n">severity</span><span class="p">,</span>
            <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="OrionDBExplorer.get_events"><a class="viewcode-back" href="../../../api_reference/api/orion.db.OrionDBExplorer.get_events.html#orion.db.OrionDBExplorer.get_events">[docs]</a>    <span class="k">def</span> <span class="nf">get_events</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">signalrun</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">signal</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Query the Events collection.</span>

<span class="sd">        All the details about the matching Signalruns will be returned in</span>
<span class="sd">        a ``pandas.DataFrame``.</span>

<span class="sd">        All the arguments are optional, so a call without arguments will</span>
<span class="sd">        return a table with information about all the Events availabe.</span>

<span class="sd">        Args:</span>
<span class="sd">            signalrun (Signalrun or ObjectID or str):</span>
<span class="sd">                Signalrun to which the Events must belong.</span>
<span class="sd">            signal (Signal or ObjectID or str):</span>
<span class="sd">                Signal to which the Events be associated.</span>
<span class="sd">            source (str):</span>
<span class="sd">                Source from which the Events must come.</span>

<span class="sd">        Returns:</span>
<span class="sd">            pandas.DataFrame</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">schema</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">find</span><span class="p">(</span>
            <span class="n">as_df_</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">signalrun</span><span class="o">=</span><span class="n">signalrun</span><span class="p">,</span>
            <span class="n">signal</span><span class="o">=</span><span class="n">signal</span><span class="p">,</span>
            <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="OrionDBExplorer.get_event"><a class="viewcode-back" href="../../../api_reference/api/orion.db.OrionDBExplorer.get_event.html#orion.db.OrionDBExplorer.get_event">[docs]</a>    <span class="k">def</span> <span class="nf">get_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">signalrun</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">signal</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get an Event object from the database.</span>

<span class="sd">        All the arguments are optional but empty queries are not allowed, so at</span>
<span class="sd">        least one argument needs to be passed with a value different than ``None``.</span>

<span class="sd">        Args:</span>
<span class="sd">            event (Event, ObjectID or str):</span>
<span class="sd">                Event object (or the corresponding ObjectID, or its string</span>
<span class="sd">                representation) that we want to retreive.</span>
<span class="sd">            signalrun (Signalrun or ObjectID or str):</span>
<span class="sd">                Signalrun to which the Events must belong.</span>
<span class="sd">            signal (Signal or ObjectID or str):</span>
<span class="sd">                Signal to which the Events be associated.</span>
<span class="sd">            source (str):</span>
<span class="sd">                Source from which the Events must come.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError:</span>
<span class="sd">                If the no arguments are passed with a value different than</span>
<span class="sd">                ``None`` or the query resolves to more than one object.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Event</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">schema</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">event</span><span class="o">=</span><span class="n">event</span><span class="p">,</span>
            <span class="n">signalrun</span><span class="o">=</span><span class="n">signalrun</span><span class="p">,</span>
            <span class="n">signal</span><span class="o">=</span><span class="n">signal</span><span class="p">,</span>
            <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span>
        <span class="p">)</span></div>

    <span class="c1"># ########## #</span>
    <span class="c1"># Annotation #</span>
    <span class="c1"># ########## #</span>

<div class="viewcode-block" id="OrionDBExplorer.add_annotation"><a class="viewcode-back" href="../../../api_reference/api/orion.db.OrionDBExplorer.add_annotation.html#orion.db.OrionDBExplorer.add_annotation">[docs]</a>    <span class="k">def</span> <span class="nf">add_annotation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add a new Annotation object to the database.</span>

<span class="sd">        The Event needs to be associated with an Event, and can be given a</span>
<span class="sd">        ``tag`` and a text comment.</span>

<span class="sd">        Args:</span>
<span class="sd">            event (Event or ObjectID or str):</span>
<span class="sd">                Event object (or the corresponding ObjectID, or its string</span>
<span class="sd">                representation) to which this Annotation is associated.</span>
<span class="sd">            tag (str):</span>
<span class="sd">                Tag of this Annotation.</span>
<span class="sd">            comment (str):</span>
<span class="sd">                Text comment of this Annotation.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Annotation</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">schema</span><span class="o">.</span><span class="n">Annotation</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span>
            <span class="n">event</span><span class="o">=</span><span class="n">event</span><span class="p">,</span>
            <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">,</span>
            <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="OrionDBExplorer.get_annotations"><a class="viewcode-back" href="../../../api_reference/api/orion.db.OrionDBExplorer.get_annotations.html#orion.db.OrionDBExplorer.get_annotations">[docs]</a>    <span class="k">def</span> <span class="nf">get_annotations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">created_by</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Query the Annotations collection.</span>

<span class="sd">        All the details about the matching Annotations will be returned in</span>
<span class="sd">        a ``pandas.DataFrame``.</span>

<span class="sd">        All the arguments are optional, so a call without arguments will</span>
<span class="sd">        return a table with information about all the Annotations availabe.</span>

<span class="sd">        Args:</span>
<span class="sd">            event (Event or ObjectID or str):</span>
<span class="sd">                Event to which the Annotations must belong.</span>
<span class="sd">            tag (str):</span>
<span class="sd">                Tag which the Annotations must have.</span>
<span class="sd">            comment (str):</span>
<span class="sd">                Comment which the Annotations must have.</span>
<span class="sd">            created_by (str):</span>
<span class="sd">                Unique identifier of the user that created the Annotations.</span>

<span class="sd">        Returns:</span>
<span class="sd">            pandas.DataFrame</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">schema</span><span class="o">.</span><span class="n">Annotation</span><span class="o">.</span><span class="n">find</span><span class="p">(</span>
            <span class="n">as_df_</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">event</span><span class="o">=</span><span class="n">event</span><span class="p">,</span>
            <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">,</span>
            <span class="n">created_by</span><span class="o">=</span><span class="n">created_by</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="OrionDBExplorer.get_annotation"><a class="viewcode-back" href="../../../api_reference/api/orion.db.OrionDBExplorer.get_annotation.html#orion.db.OrionDBExplorer.get_annotation">[docs]</a>    <span class="k">def</span> <span class="nf">get_annotation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">annotation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">created_by</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get an Event object from the database.</span>

<span class="sd">        All the arguments are optional but empty queries are not allowed, so at</span>
<span class="sd">        least one argument needs to be passed with a value different than ``None``.</span>

<span class="sd">        Args:</span>
<span class="sd">            annotation (Annotation, ObjectID or str):</span>
<span class="sd">                Annotation object (or the corresponding ObjectID, or its string</span>
<span class="sd">                representation) that we want to retreive.</span>
<span class="sd">            event (Event or ObjectID or str):</span>
<span class="sd">                Event to which the Annotation must belong.</span>
<span class="sd">            tag (str):</span>
<span class="sd">                Tag which the Annotation must have.</span>
<span class="sd">            comment (str):</span>
<span class="sd">                Comment which the Annotation must have.</span>
<span class="sd">            created_by (str):</span>
<span class="sd">                Unique identifier of the user that created the Annotation.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError:</span>
<span class="sd">                If the no arguments are passed with a value different than</span>
<span class="sd">                ``None`` or the query resolves to more than one object.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Annotation</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">schema</span><span class="o">.</span><span class="n">Annotation</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">annotation</span><span class="o">=</span><span class="n">annotation</span><span class="p">,</span>
            <span class="n">event</span><span class="o">=</span><span class="n">event</span><span class="p">,</span>
            <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">,</span>
            <span class="n">created_by</span><span class="o">=</span><span class="n">created_by</span><span class="p">,</span>
        <span class="p">)</span></div></div>
</pre></div>

              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
              
          </main>
          

      </div>
    </div>
  
    <script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2018, MIT Data To AI Lab.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.2.1.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>